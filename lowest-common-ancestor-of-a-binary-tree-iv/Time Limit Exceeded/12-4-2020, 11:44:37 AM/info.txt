{"id":427161062,"lang":"cpp","time":"1 year, 4 months","timestamp":1607100277,"status_display":"Time Limit Exceeded","runtime":"N/A","url":"/submissions/detail/427161062/","is_pending":"Not Pending","title":"Lowest Common Ancestor of a Binary Tree IV","memory":"N/A","code":"/**\n * Definition for a binary tree node.\n * struct TreeNode {\n *     int val;\n *     TreeNode *left;\n *     TreeNode *right;\n *     TreeNode() : val(0), left(nullptr), right(nullptr) {}\n *     TreeNode(int x) : val(x), left(nullptr), right(nullptr) {}\n *     TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {}\n * };\n */\nclass Solution {\npublic:\n    TreeNode* lowestCommonAncestor(TreeNode* root, vector<TreeNode*> &nodes) {\n        unordered_map<TreeNode*, TreeNode*> parents;\n        unordered_map<TreeNode*, int> depth;\n        function<void(TreeNode*,TreeNode*,int)> setParents = [&](TreeNode* cur, TreeNode* parent, int d) -> void {\n            if (!cur) return;\n            parents[cur] = parent;\n            depth[cur] = d;\n            setParents(cur -> left, cur, d+1); \n            setParents(cur -> right, cur, d+1);\n        };\n        \n        setParents(root, nullptr, 0);\n        \n        int mindepth = INT_MAX;\n        for (auto t : nodes) {\n            mindepth = min(mindepth, depth[t]);\n        }\n        \n        for (int i = 0; i < nodes.size(); ++i) {\n            while(depth[nodes[i]] > mindepth) {\n                nodes[i] = parents[nodes[i]];\n            }\n        }\n        \n        unordered_set<TreeNode*> level(nodes.begin(), nodes.end()); \n        \n        while(level.size() > 1) {\n            unordered_set<TreeNode*> next_level; \n            for (TreeNode* t : level) {\n                next_level.insert(parents[t]); \n            }\n            level.swap(next_level);\n        }\n        \n        return *level.begin();\n    }\n};","compare_result":"111111111111111111111111111111111111111111111111111111100","title_slug":"lowest-common-ancestor-of-a-binary-tree-iv"}