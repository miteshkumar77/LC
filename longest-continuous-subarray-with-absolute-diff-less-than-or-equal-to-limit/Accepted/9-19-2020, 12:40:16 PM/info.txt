{"id":397913673,"lang":"cpp","time":"1 year, 7 months","timestamp":1600533616,"status_display":"Accepted","runtime":"368 ms","url":"/submissions/detail/397913673/","is_pending":"Not Pending","title":"Longest Continuous Subarray With Absolute Diff Less Than or Equal to Limit","memory":"51.9 MB","code":"class Solution {\n    \nprivate:\n    \n    class SW {\n        \n    public:\n        \n        SW(function<bool(int,int)> comparator) {\n            cmp = comparator; \n            m_size = 0; \n        }\n        \n        \n        int getExt() {\n            if (dq.empty()) {\n                cout << \"Popped empty deque!!!\" << endl; \n            }\n            return dq.front().first; \n        }\n        \n        int size() {\n            return m_size; \n        }\n        bool empty() {\n            return dq.empty(); \n        }\n        void push(int i) {\n            ++m_size;\n            pair<int,int> nw = make_pair(i, 1); \n            while(!dq.empty() && cmp(nw.first, dq.back().first)) {\n                nw.second += dq.back().second; \n                dq.pop_back(); \n            }\n            dq.push_back(nw); \n        }\n        \n        void pop() {\n            --m_size;\n            --dq.front().second; \n            if (dq.front().second == 0) {\n                dq.pop_front(); \n            }\n        }\n        \n    private:\n        \n        int m_size; \n        deque<pair<int,int>> dq; \n        function<bool(int,int)> cmp; \n    };\npublic:\n    int longestSubarray(vector<int>& nums, int limit) {\n        SW minq([](int a, int b) -> bool {\n            return a <= b;     \n        });\n        \n        SW maxq([](int a, int b) -> bool {\n            return a >= b;     \n        });\n        \n        int ans = 1; \n        function<int()> getdiff = [&]() -> int {\n            return maxq.getExt() - minq.getExt();     \n        };        \n        for (int i = 0; i < nums.size(); ++i) {\n            minq.push(nums[i]); \n            maxq.push(nums[i]); \n            while(!minq.empty() && getdiff() > limit) {\n                minq.pop(); \n                maxq.pop(); \n            }\n            if (!minq.empty()) {\n                ans = max(ans, minq.size()); \n            }\n        }\n        return ans; \n        \n    }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","compare_result":"111111111111111111111111111111111111111111111111111111111111","title_slug":"longest-continuous-subarray-with-absolute-diff-less-than-or-equal-to-limit"}