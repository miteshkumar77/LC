{"id":678353664,"lang":"cpp","time":"1Â week","timestamp":1649689350,"status_display":"Accepted","runtime":"28 ms","url":"/submissions/detail/678353664/","is_pending":"Not Pending","title":"Maximum Sum of 3 Non-Overlapping Subarrays","memory":"30 MB","code":"class Solution {\npublic:\n    using ll = long long;\n    \n    array<vector<ll>, 2> get_max_end(vector<int> const& nums, int k, bool pref) {\n        int n = nums.size();\n        vector<ll> ans(n+1, INT_MIN);\n        vector<ll> idx(n+1, -1);\n        ll acc = 0;\n        for (int i = 0; i < n; ++i) {\n            acc += nums[i];\n            if ((i+1) >= k) {\n                if ((pref && (ans[i] < acc)) || (!pref && (ans[i] <= acc))) {\n                    ans[i+1] = acc;\n                    idx[i+1] = (pref ? i-k+1 : n-i-1);\n                } else {\n                    ans[i+1] = ans[i];\n                    idx[i+1] = idx[i];\n                }\n                acc -= nums[i-k+1];\n            }\n        }\n        return {ans, idx};\n    }\n    \n    vector<int> maxSumOfThreeSubarrays(vector<int>& nums, int k) {\n        int n = nums.size();\n        auto [pref_sum, pref_idx] = get_max_end(nums, k, true);\n        reverse(nums.begin(), nums.end());\n        auto [suff_sum, suff_idx] = get_max_end(nums, k, false);\n        reverse(nums.begin(), nums.end());\n        reverse(suff_sum.begin(), suff_sum.end());\n        reverse(suff_idx.begin(), suff_idx.end());\n        \n        ll max_sum = INT_MIN;\n        vector<int> ans{};\n        \n        ll acc{0};\n        for (int i = 0; i + k < nums.size(); ++i) {\n            acc += nums[i];\n            if ((i+1) >= 2 * k) {\n                if ((acc + pref_sum[i-k+1] + suff_sum[i+1]) > max_sum) {\n                    max_sum = acc + pref_sum[i-k+1] + suff_sum[i+1];\n                    ans = {(int)pref_idx[i-k+1], i-k+1, (int)suff_idx[i+1]};\n                }\n            }\n            if ((i+1) >= k) {\n                acc -= nums[i-k+1];\n            }\n        }\n        return ans;\n        \n    }\n};","compare_result":"1111111111111111111111111111111111111111111","title_slug":"maximum-sum-of-3-non-overlapping-subarrays"}